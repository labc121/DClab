import threading
import time
counter = 0
lock = threading.Lock()
def process(name):
    global counter
    print(f"{name} wants to enter critical section")
    print(f"{name} waiting to enter...")  
    with lock:
        print(f"{name} entered critical section")
        temp = counter
        time.sleep(1)
        counter = temp + 1
        print(f"{name} leaving critical section")
p1 = threading.Thread(target=process, args=("P1",))
p2 = threading.Thread(target=process, args=("P2",))
p1.start()
p2.start()
p1.join()
p2.join()
print("Final counter value:", counter)
